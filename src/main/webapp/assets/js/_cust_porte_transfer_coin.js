i18next.init({
	lng: 'EN',
	fallbackLng: 'EN',
	debug: false,
	resources: {
	  EN: {
		translation: {
             /* Menus */
			"idnavmenu_Dashboard":"Dashboard",
			"idnavmenu_ManageFiatWallet":"Manage Fiat Wallet",
			"idnavmenu_DigitalAssets":"Digital Assets",
			"idnavmenu_DigitalAssets":"Digital Assets",
			"idnavmenu_CurrencyRemittance":"Currency Remittance",
			"idnavmenu_ManageCards":"Manage Cards",
			"idnavmenu_Loyalty":"Loyalty",
			"idnavmenu_UpdatePlan":"Update Plan",
			"idnavmenu_Logout":"Logout",
			"idnavmenu_BuyNewPlan":"Buy New Plan",
			"header_buy_porte_token":"Buy Porte Token",
			"btn_buy_coin":"Buy Coin",
			"idnavmenu_Profile":"Profile",
			"idnavmenu_Disputes":"Disputes",
             /* Sub Menus */
            "idnavsubmenu_Dashboard":"Dashboard",
            "idnavsubmenu_ViewandEdit":"View and Edit",
            "idnavsubmenu_ViewWallet":"View Wallet",
            "idnavsubmenu_TopupWallet":"Topup Wallet",
            "idnavsubmenu_SendMoney":"Send Money",
            "idnavsubmenu_CashTransactions":"Cash Transactions",
            "idnavsubmenu_SetupWallet":"Set up Wallet",
            "idnavsubmenu_Bitcoin":"Bitcoin",
            "idnavsubmenu_Assets":"Assets",
            "idnavsubmenu_BuyAsset":"Buy Asset",
            "idnavsubmenu_TransferCoin":"Transfer Coin",
            "idnavsubmenu_Swap":"Swap",
            "idnavsubmenu_SellAssettoFiat":"Sell Asset to Fiat",
            "idnavsubmenu_DisplayTransactions":"Display Transactions",
            "idnavsubmenu_DigitalRemittance":"Digital Remittance",
            "idnavsubmenu_FiatRemittance":"Fiat Remittance",
            "idnavsubmenu_ShowCards":"Show Cards",
            "idnavsubmenu_RedeemPoints":"Redeem Points",
            "idnavsubmenu_ViewDispute":"View Dispute",
            "idnavsubmenu_RaiseDisputes":"Raise Disputes",
            "idnavsubmenu_ChangeYourPlan":"Change Your Plan",
            "idnavsubmenu_BuyNewPlan":"Buy New Plan",
			
            /* Quick links */
            "idnav_UserSettings":"User Settings",
            "idnav_UpdateProfile":"Update Profile",
            "idnav_Logout":"Logout",
             /* Specific Page Content */
			//"greeting":"Customer",
			"breadcrumb-item-digital-assets":"Digital Assets",
			"breadcrumb-item-transfer-coin":"Transfer Coin",
			"spn_view_claimable_balance":"View Claimable Balances",
			"tab-header-direct-transfer":"Direct Transfer",
			"tab-header-create-claimable-balance":"Create Claimable Balance",
			"from_label_1":"From",
			"destination_label":"Destination",
			"send_to_label":"Send to",
			"comment-label":"Comment",
			"btn_send_coin":"Send Coin",
			"destination_label_2":"Destination",
			"send_to_label_2":"Send To",
			"amount_to_send_2":"Amount to send",
			"comment_label_2":"Comment",
			"send_coin_label_12":"Send Coin",
			"amount_to_send_label":"Amount to send",
            "data-validation-error-swal-header":"Oops..",
            "data-validation-error-failed-to-get-details":"Failed to get details",
            "data-validation-problem-with-connection":"Problem with connection",
            "data-validation-check-your-data":"Please check your data",
            "data-validation-no-assets-available":"No assets available",
            "pay-anyone-data-validation-error-from":"Please select the Coin",
            "pay-anyone-data-validation-error-sendto":"Please enter receiver",
            "pay-anyone-data-validation-error-amounttosend":"Please enter Amount to send",
            "pay-anyone-data-validation-coin-destination":"Select Destination Coin",
            "enter-your-passsword-tittle":"Enter your Password",
            "enter-your-passsword-label":"Password",
            "data-validation-enter-your-passsword-label":"Please input your password!",
            "data-validation-enter-your-pvt-key-label":"Please input your Private Key!",
            "enter-your-pvt-key-label":"Enter your Private Key",
            "transfer_coin_header":"Transfer Coin",
            "span_select_coin":"Select coin"
			
		}
	  },
	  ES: {
		  translation: {
			/* Menus */
			"idnavmenu_Dashboard":"Tablero",
			"idnavmenu_ManageFiatWallet":"Administrar Monedero Fiat",
			"idnavmenu_DigitalAssets":"Recursos digitales",
			"idnavmenu_CurrencyRemittance":"Remesa de divisas",
			"idnavmenu_ManageCards":"Administrar tarjetas",
			"idnavmenu_Loyalty":"Lealtad",
			"idnavmenu_UpdatePlan":"Actualizar plan",
			"idnavmenu_Logout":"Cerrar sesión",
			"idnavmenu_BuyNewPlan":"Comprar nuevo plan",
			"header_buy_porte_token":"Comprar Token de Porte",
			"btn_buy_coin":"Comprar moneda",
			"idnavmenu_Profile":"Perfil",
             /* Sub Menus */
            "idnavsubmenu_Dashboard":"Tablero",
            "idnavsubmenu_ViewandEdit":"Ver y editar",
            "idnavsubmenu_ViewWallet":"Ver billetera",
            "idnavsubmenu_TopupWallet":"Monedero de recarga",
            "idnavsubmenu_SendMoney":"Enviar dinero",
            "idnavsubmenu_CashTransactions":"Transacciones en efectivo",
            "idnavsubmenu_SetupWallet":"Configurar Monedero",
            "idnavsubmenu_Bitcoin":"Bitcoin",
            "idnavsubmenu_Assets":"Activos",
            "idnavsubmenu_BuyAsset":"Comprar activo",
            "idnavsubmenu_TransferCoin":"Comprar juego de monedas ATransfer",
            "idnavsubmenu_Swap":"Intercambio",
            "idnavsubmenu_SellAssettoFiat":"Vender activos a Fiat",
            "idnavsubmenu_DisplayTransactions":"Mostrar transacciones",
            "idnavsubmenu_DigitalRemittance":"Remesas digitales",
            "idnavsubmenu_FiatRemittance":"Remesa fiduciaria",
            "idnavsubmenu_ShowCards":"Mostrar cartas",
            "idnavsubmenu_RedeemPoints":"Canjear puntos",
            "idnavsubmenu_ViewDispute":"Ver disputa",
            "idnavsubmenu_RaiseDisputes":"Plantear disputas",
            "idnavsubmenu_ChangeYourPlan":"Cambia tu plan",
            "idnavsubmenu_BuyNewPlan":"Comprar nuevo plan",
            /* Quick links */
            "idnav_UserSettings":"Ajustes de usuario",
            "idnav_UpdateProfile":"Actualización del perfil",
            "idnav_Logout":"Cerrar sesión",
             /* Specific Page Content */
			//"greeting":"Cliente",
			"breadcrumb-item-digital-assets":"Recursos digitales",
			"breadcrumb-item-transfer-coin":"Moneda de transferencia",
			"spn_view_claimable_balance":"Ver saldos reclamables",
			"tab-header-direct-transfer":"Transferencia directa",
			"tab-header-create-claimable-balance":"Crear saldo reclamable",
			"from_label_1":"De",
			"destination_label":"Destino",
			"send_to_label":"Enviar a",
			"comment-label":"Comentario",
			"btn_send_coin":"enviar moneda",
			"destination_label_2":"Destino",
			"send_to_label_2":"Enviar a",
			"amount_to_send_2":"cantidad a enviar",
			"comment_label_2":"Comentario",
			"send_coin_label_12":"enviar moneda",
            "data-validation-error-swal-header":"Ups..",
            "data-validation-error-failed-to-get-details":"Error al obtener detalles",
            "data-validation-problem-with-connection":"problema con la conexion",
            "data-validation-check-your-data":"Por favor revisa tus datos",
            "data-validation-no-assets-available":"No hay activos disponibles",
            "pay-anyone-data-validation-error-from":"Seleccione la moneda",
            "pay-anyone-data-validation-error-sendto":"Por favor ingrese el receptor",
            "pay-anyone-data-validation-error-amounttosend":"Por favor ingrese la cantidad a enviar",
            "pay-anyone-data-validation-coin-destination":"Seleccionar moneda de destino",
            "enter-your-passsword-tittle":"Ingresa tu contraseña",
            "enter-your-passsword-label":"Clave",
            "data-validation-enter-your-passsword-label":"¡Por favor ingrese su contraseña!",
            "data-validation-enter-your-pvt-key-label":"¡Ingrese su clave privada!",
            "enter-your-pvt-key-label":"Ingrese su clave privada",
            "transfer_coin_header":"Moneda de transferencia",
			"amount_to_send_label":"cantidad a enviar",
            "span_select_coin":"Seleccionar moneda"

			}
		},
	}
  }, function(err, t) {
	   updateContent();
  });
  
  function updateContent() {
        /* Menus */
        $('#idnavmenu_Dashboard').text(i18next.t('idnavmenu_Dashboard')); 
        $('#idnavmenu_ManageFiatWallet').text(i18next.t('idnavmenu_ManageFiatWallet')); 
        $('#idnavmenu_DigitalAssets').text(i18next.t('idnavmenu_DigitalAssets')); 
        $('#idnavmenu_CurrencyRemittance').text(i18next.t('idnavmenu_CurrencyRemittance')); 
        $('#idnavmenu_ManageCards').text(i18next.t('idnavmenu_ManageCards')); 
        $('#idnavmenu_Loyalty').text(i18next.t('idnavmenu_Loyalty')); 
        $('#idnavmenu_UpdatePlan').text(i18next.t('idnavmenu_UpdatePlan')); 
        $('#idnavmenu_Logout').text(i18next.t('idnavmenu_Logout')); 
        $('#idnavmenu_BuyNewPlan').text(i18next.t('idnavmenu_BuyNewPlan')); 
        $('#header_buy_porte_token').text(i18next.t('header_buy_porte_token')); 
        $('#btn_buy_coin').text(i18next.t('btn_buy_coin')); 
        $('#idnavmenu_Profile').text(i18next.t('idnavmenu_Profile')); 
        $('#idnavmenu_Disputes').text(i18next.t('idnavmenu_Disputes')); 
        /* Sub Menus */
        $('#idnavsubmenu_Dashboard').text(i18next.t('idnavsubmenu_Dashboard')); 
        $('#idnavsubmenu_ViewandEdit').text(i18next.t('idnavsubmenu_ViewandEdit')); 
        $('#idnavsubmenu_ViewWallet').text(i18next.t('idnavsubmenu_ViewWallet')); 
        $('#idnavsubmenu_TopupWallet').text(i18next.t('idnavsubmenu_TopupWallet')); 
        $('#idnavsubmenu_SendMoney').text(i18next.t('idnavsubmenu_SendMoney')); 
        $('#idnavsubmenu_CashTransactions').text(i18next.t('idnavsubmenu_CashTransactions')); 
        $('#idnavsubmenu_SetupWallet').text(i18next.t('idnavsubmenu_SetupWallet')); 
        $('#idnavsubmenu_Bitcoin').text(i18next.t('idnavsubmenu_Bitcoin')); 
        $('#idnavsubmenu_Assets').text(i18next.t('idnavsubmenu_Assets')); 
        $('#idnavsubmenu_BuyAsset').text(i18next.t('idnavsubmenu_BuyAsset')); 
        $('#idnavsubmenu_TransferCoin').text(i18next.t('idnavsubmenu_TransferCoin')); 
        $('#idnavsubmenu_Swap').text(i18next.t('idnavsubmenu_Swap')); 
        $('#idnavsubmenu_SellAssettoFiat').text(i18next.t('idnavsubmenu_SellAssettoFiat')); 
        $('#idnavsubmenu_DisplayTransactions').text(i18next.t('idnavsubmenu_DisplayTransactions')); 
        $('#idnavsubmenu_DigitalRemittance').text(i18next.t('idnavsubmenu_DigitalRemittance')); 
        $('#idnavsubmenu_FiatRemittance').text(i18next.t('idnavsubmenu_FiatRemittance')); 
        $('#idnavsubmenu_ShowCards').text(i18next.t('idnavsubmenu_ShowCards')); 
        $('#idnavsubmenu_RedeemPoints').text(i18next.t('idnavsubmenu_RedeemPoints')); 
        $('#idnavsubmenu_ViewDispute').text(i18next.t('idnavsubmenu_ViewDispute')); 
        $('#idnavsubmenu_RaiseDisputes').text(i18next.t('idnavsubmenu_RaiseDisputes')); 
        $('#idnavsubmenu_ChangeYourPlan').text(i18next.t('idnavsubmenu_ChangeYourPlan')); 
        $('#idnavsubmenu_BuyNewPlan').text(i18next.t('idnavsubmenu_BuyNewPlan')); 
        /* Quick links */
        $('#idnav_UserSettings').text(i18next.t('idnav_UserSettings'));        
        $('#idnav_UpdateProfile').text(i18next.t('idnav_UpdateProfile'));        
        $('#idnav_Logout').text(i18next.t('idnav_Logout'));        
        /* Specific Page Content */
       // $('#greeting').text(i18next.t('greeting'));
        $('#breadcrumb-item-digital-assets').text(i18next.t('breadcrumb-item-digital-assets'));
        $('#breadcrumb-item-transfer-coin').text(i18next.t('breadcrumb-item-transfer-coin'));
        $('#spn_view_claimable_balance').text(i18next.t('spn_view_claimable_balance'));
        $('#tab-header-direct-transfer').text(i18next.t('tab-header-direct-transfer'));
        $('#tab-header-create-claimable-balance').text(i18next.t('tab-header-create-claimable-balance'));
        $('#from_label_1').text(i18next.t('from_label_1'));
        $('#destination_label').text(i18next.t('destination_label'));
        $('#send_to_label').text(i18next.t('send_to_label'));
        $('#comment-label').text(i18next.t('comment-label'));
        $('#btn_send_coin').text(i18next.t('btn_send_coin'));
        $('#destination_label_2').text(i18next.t('destination_label_2'));
        $('#send_to_label_2').text(i18next.t('send_to_label_2'));
        $('#amount_to_send_2').text(i18next.t('amount_to_send_2'));
        $('#comment_label_2').text(i18next.t('comment_label_2'));
        $('#send_coin_label_12').text(i18next.t('send_coin_label_12'));
        $('#data-validation-error-swal-header').text(i18next.t('data-validation-error-swal-header'));
        $('#data-validation-error-failed-to-get-details').text(i18next.t('data-validation-error-failed-to-get-details'));
        $('#data-validation-problem-with-connection').text(i18next.t('data-validation-problem-with-connection'));
        $('#data-validation-check-your-data').text(i18next.t('data-validation-check-your-data'));
        $('#data-validation-no-assets-available').text(i18next.t('data-validation-no-assets-available'));
        $('#pay-anyone-data-validation-error-from').text(i18next.t('pay-anyone-data-validation-error-from'));
        $('#pay-anyone-data-validation-error-sendto').text(i18next.t('pay-anyone-data-validation-error-sendto'));
        $('#pay-anyone-data-validation-error-amounttosend').text(i18next.t('pay-anyone-data-validation-error-amounttosend'));
        $('#pay-anyone-data-validation-coin-destination').text(i18next.t('pay-anyone-data-validation-coin-destination'));
        $('#enter-your-passsword-tittle').text(i18next.t('enter-your-passsword-tittle'));
        $('#enter-your-passsword-label').text(i18next.t('enter-your-passsword-label'));
        $('#data-validation-enter-your-passsword-label').text(i18next.t('data-validation-enter-your-passsword-label'));
        $('#data-validation-enter-your-pvt-key-label').text(i18next.t('data-validation-enter-your-pvt-key-label'));
        $('#enter-your-pvt-key-label').text(i18next.t('enter-your-pvt-key-label'));
        $('#transfer_coin_header').text(i18next.t('transfer_coin_header'));
        $('#amount_to_send_label').text(i18next.t('amount_to_send_label'));
        $('#span_select_coin').text(i18next.t('span_select_coin'));
  }
	  function fnChangePageLanguage(lng){
		console.log('lng ',lng);
		  i18next.changeLanguage(lng, fnChangeLanguage(lng))
		  $('#hdnlangpref').val(lng);
	  }
	  i18next.on('languageChanged', function(lng) {
		updateContent(lng);
	  });
	  function fnChangeLanguage(lang){
		  if(lang=='EN')  $('#lang_def').text('EN') 
			else if(lang=='ES')  $('#lang_def').text('ES')
	  }


$(window).on("load", function(e) {
    $("#global-loader").fadeOut("slow");
})

let s_SenderAssetCode;
let s_SenderAssetCodeCB;
function fnUpdateSenderparamsCB(data) {
    var assetcode = data;
    if (assetcode == '') {
        swal.fire($('#pay-anyone-data-validation-coin-destination').text());
        return false;
    } else {
        $("#spansendcode_cb").text(assetcode);
        $("#receiver_asset_cb").val(assetcode);
    	
		if(assetcode==="VESL"||assetcode==="vesl"){
			document.getElementById("sendamount_cb").style.backgroundImage = "url('./assets/images/crypto/vessel.png')";

        }
        if(assetcode==="PORTE" || assetcode==="porte"){
			document.getElementById("sendamount_cb").style.backgroundImage = "url('./assets/images/crypto/porte.svg')";
        }
        if(assetcode==="XLM"||assetcode==="xlm"){
			document.getElementById("sendamount_cb").style.backgroundImage = "url('./assets/images/crypto/xlm.svg')";

        }
        if(assetcode==="USDC"||assetcode==="usdc"){
			document.getElementById("sendamount_cb").style.backgroundImage = "url('./assets/images/crypto/usdc.png')";

        }
    }
}

function fnUpdatereceiveparams() {
    var assetcode = $("#sender_asset option:selected").val();
    console.log('assetcode ia ', assetcode);
    if (assetcode == '') {
        swal.fire($('#pay-anyone-data-validation-coin-destination').text());
        return false;
    } else {
        $("#spanreceivedcode").text(assetcode);
    }		
}

$( document ).ready(function() {
    //fnGetlastFiveTxn ();
fnGetCoinDetailsTransferCB();
fnGetCoinDetails();
});

function fnGetCoinDetails(){
	$('#post-form input[name="qs"]').val('porte');
	$('#post-form input[name="rules"]').val('get_crypto_assets_details_without_btc');
	var form = $('#post-form')[0];
    var formData = new FormData(form);	
	$.ajaxSetup({
		beforeSend: function(xhr) {
			xhr.setRequestHeader('x-api-key' , getAPIKey());
		}
	});
	$.ajax({
		url: 'ms',
		data: formData,
		processData: false,
		contentType: false,
		type: 'POST',
		success: function (result) {
			if (result) {
				var data = JSON.parse(result);
				var porteCoinList=data.data;	
				console.log(porteCoinList);
                var htmlOptions = '';
				$('#sender_asset').html('');
				$('#receiver_asset').html('');

                
				if(data.error="false"){
                    if (porteCoinList.length > 0) {
              htmlOptions+=`
                <select id="select-asset-dt-id" onChange="javascript: fnOnchange(); return false">
                  <option selected disabled>Select Coin</option>
                  `;
                  for (i = 0; i < porteCoinList.length; i++) {
                  if(porteCoinList[i].assetCode==="PORTE"){
                    htmlOptions+=`<option value="PORTE" data-imagesrc="assets/images/crypto/porte.svg" value="` +
                    porteCoinList[i].walletId +
                    `,` +
                    porteCoinList[i].assetCode +
                    `">` +
                    porteCoinList[i].assetCode +
                    `</option>`;
                  }
                  if(porteCoinList[i].assetCode==="VESL"){
                    htmlOptions+=` <option value="VESL" data-imagesrc="assets/images/crypto/vessel.png"value="` +
                    porteCoinList[i].walletId +
                    `,` +
                    porteCoinList[i].assetCode +
                    `">` +
                    porteCoinList[i].assetCode +
                    `</option>`;
                  }
                  if(porteCoinList[i].assetCode==="XLM"){
                    htmlOptions+=` <option value="XLM" data-imagesrc="assets/images/crypto/xlm.svg"value="` +
                    porteCoinList[i].walletId +
                    `,` +
                    porteCoinList[i].assetCode +
                    `">` +
                    porteCoinList[i].assetCode +
                    `</option>`;
                  }
                  if(porteCoinList[i].assetCode==="USDC"){
                    htmlOptions+=`<option value="USDC" data-imagesrc="assets/images/crypto/usdc.png"value="` +
                    porteCoinList[i].walletId +
                    `,` +
                    porteCoinList[i].assetCode +
                    `">` +
                    porteCoinList[i].assetCode +
                    `</option>`;
                  }
                }
                 
                  htmlOptions+=` </select>`;

              }else{
                        htmlOptions+=`<option disabled="disabled" value="-1" selected>`+$('#data-validation-no-assets-available').text()+`</option>`;
                    }
                    $('#receiver_asset').append(htmlOptions);

				$("#sender_asset").append(htmlOptions);
           			 $('#select-asset-dt-id').ddslick({
             		 onSelected: function(data){
              		  displaySelectedDataDT(data);
            		}
           		 });
				}else{
                        
                }
			}
				
			
		},
		error: function() {
            Swal.fire({
                icon: 'error',
                title:  $('#data-validation-error-swal-header').text(),
                text: $('#data-validation-problem-with-connection').text(),
                showConfirmButton: true,
                confirmButtonText: "Ok",
                }).then(function() {
                   
        });
		}
	}); 
}
function fnGetCoinDetailsTransferCB(){
	$('#post-form input[name="qs"]').val('porte');
	$('#post-form input[name="rules"]').val('get_crypto_assets_details_without_btc');
	var form = $('#post-form')[0];
    var formData = new FormData(form);	
	$.ajaxSetup({
		beforeSend: function(xhr) {
			xhr.setRequestHeader('x-api-key' , getAPIKey());
		}
	});
	$.ajax({
		url: 'ms',
		data: formData,
		processData: false,
		contentType: false,
		type: 'POST',
		success: function (result) {
			if (result) {
				var data = JSON.parse(result);
				var porteCoinList=data.data;	
				console.log(porteCoinList);
                var htmlOptions = '';
				$('#sender_asset_cb').html('');
				$('#receiver_asset_cb').html('');
				
				console.log(`I am getting here cb`)
                
				if(data.error="false"){
                    if (porteCoinList.length > 0) {
              htmlOptions+=`
                <select id="select-asset-cb-id">
                  <option selected disabled>Select Coin</option>
                  `;
                  for (i = 0; i < porteCoinList.length; i++) {
                  if(porteCoinList[i].assetCode==="PORTE"){
                    htmlOptions+=`<option value="PORTE" data-imagesrc="assets/images/crypto/porte.svg" value="` +
                    porteCoinList[i].walletId +
                    `,` +
                    porteCoinList[i].assetCode +
                    `">` +
                    porteCoinList[i].assetCode +
                    `</option>`;
                  }
                  if(porteCoinList[i].assetCode==="VESL"){
                    htmlOptions+=` <option value="VESL" data-imagesrc="assets/images/crypto/vessel.png"value="` +
                    porteCoinList[i].walletId +
                    `,` +
                    porteCoinList[i].assetCode +
                    `">` +
                    porteCoinList[i].assetCode +
                    `</option>`;
                  }
                  if(porteCoinList[i].assetCode==="XLM"){
                    htmlOptions+=` <option value="XLM" data-imagesrc="assets/images/crypto/xlm.svg"value="` +
                    porteCoinList[i].walletId +
                    `,` +
                    porteCoinList[i].assetCode +
                    `">` +
                    porteCoinList[i].assetCode +
                    `</option>`;
                  }
                  if(porteCoinList[i].assetCode==="USDC"){
                    htmlOptions+=`<option value="USDC" data-imagesrc="assets/images/crypto/usdc.png"value="` +
                    porteCoinList[i].walletId +
                    `,` +
                    porteCoinList[i].assetCode +
                    `">` +
                    porteCoinList[i].assetCode +
                    `</option>`;
                  }
                }
                 
                  htmlOptions+=` </select>`;

              }else{
                        htmlOptions+=`<option disabled="disabled" value="-1" selected>`+$('#data-validation-no-assets-available').text()+`</option>`;
                    }
                    // $('#receiver_asset').append(htmlOptions);
                    $('#receiver_asset_cb').append(htmlOptions);

				 $("#sender_asset_cb").append(htmlOptions);
	           	 $('#select-asset-cb-id').ddslick({
	              onSelected: function(data){
	                displaySelectedData(data);
	            }
	            });
				}else{
                        
                }
			}
				
			
		},
		error: function() {
            Swal.fire({
                icon: 'error',
                title:  $('#data-validation-error-swal-header').text(),
                text: $('#data-validation-problem-with-connection').text(),
                showConfirmButton: true,
                confirmButtonText: "Ok",
                }).then(function() {
                   
        });
		}
	}); 
}
 function displaySelectedData(data){
    var selectedValue = data.selectedData.value
    //$("#sender_asset").text(assetcode);
    fnUpdateSenderparamsCB(selectedValue)
    s_SenderAssetCodeCB =selectedValue; 
  }
  function displaySelectedDataDT(data){
    var selectedValue = data.selectedData.value
    //$("#sender_asset").text(assetcode);
    fnUpdatesenderparams(selectedValue)
    s_SenderAssetCode=selectedValue;

  }
function fnUpdatesenderparams(selectedValue) {
    var assetcode = selectedValue
    if (assetcode == '') {
        swal.fire( $('#pay-anyone-data-validation-coin-destination').text());
        return false;
    } else {
        $("#spansendcode").text(assetcode);
        $("#receiver_asset").val(assetcode); 
		if(assetcode==="VESL"||assetcode==="vesl"){
          	document.getElementById("sendamount").style.backgroundImage = "url('./assets/images/crypto/vessel.png')";
        }
        if(assetcode==="PORTE" || assetcode==="porte"){
			document.getElementById("sendamount").style.backgroundImage = "url('./assets/images/crypto/porte.svg')";
        }
        if(assetcode==="XLM"||assetcode==="xlm"){
			document.getElementById("sendamount").style.backgroundImage = "url('./assets/images/crypto/xlm.svg')";
        }
        if(assetcode==="USDC"||assetcode==="usdc"){
			document.getElementById("sendamount").style.backgroundImage = "url('./assets/images/crypto/usdc.png')";
        }
    }
}
function fnTransferCoin (security, hasMnemonic){
    $( "#transfer-coin-form" ).validate( {
        rules: {
            sender_asset: {
                required: true
            },
            input_receiver: {
                required: true
            },
            sendamount: {
                required: true
            }
           
            
        },
        messages: {
            sender_asset: {
                required: $('#pay-anyone-data-validation-error-from').text()
            },
            input_receiver: {
                required: $('#pay-anyone-data-validation-error-sendto').text()
            },
            sendamount: {
                required: $('#pay-anyone-data-validation-error-amounttosend').text()
            }
			
			
        },
        errorElement: "em",
        errorPlacement: function ( error, element ) {
            // Add the `invalid-feedback` class to the error element
            error.addClass( "invalid-feedback" );
            if ( element.prop( "type" ) === "checkbox" ) {
                error.insertAfter( element.next( "label" ) );
            } else {
                error.insertAfter( element );
            }
        },
        highlight: function ( element, errorClass, validClass ) {
            $( element ).addClass( "is-invalid" ).removeClass( "is-valid" );
        },
        unhighlight: function (element, errorClass, validClass) {
            $( element ).addClass( "is-valid" ).removeClass( "is-invalid" );
        }
    });
    if($( "#transfer-coin-form" ).valid()){
	 $('#spinner-div').show();//Load button clicked show spinner
    	senderAssetCode= s_SenderAssetCode||s_SenderAssetCodeCB ; 
   		console.log(`senderAssetCode asset code is `,senderAssetCode)

        $('#transfer-coin-form input[name="qs"]').val('porte');
        $('#transfer-coin-form input[name="rules"]').val('transfer_porte_coin');
        
        var formData = new FormData($('#transfer-coin-form')[0]);
		formData.append('security',security);
		formData.append('hasMnemonic',hasMnemonic);
		formData.append("hdnlang", $('#lang_def').text());
		formData.append('sender_asset', senderAssetCode);

        for (var pair of formData.entries()) {
          console.log(pair[0] + " - " + pair[1]);
        }	
        $.ajaxSetup({
            beforeSend: function(xhr) {
                xhr.setRequestHeader('x-api-key' , getAPIKey());
            }
        });
        $.ajax({
            url: 'ms',
            data: formData,
            processData: false,
            contentType: false,
            type: 'POST',
            success: function (result) {
                $('#spinner-div').hide();//Request is complete so hide spinner
                var data = JSON.parse(result);
                console.log('data ',data);
                if(data.error=='false'){
                    Swal.fire({
                          text: data.message,
						  imageUrl: 'assets/images/crypto/success.svg',
						  imageWidth: 400,
						  imageHeight: 200,
						  imageAlt: 'Custom image',
                    }).then(function() {
                        $('#post-form').attr('action', 'ws');
                        $('input[name="qs"]').val('porte');
                        $('input[name="rules"]').val('Display Transactions');
                        $("#post-form").submit();
                    });	
                }else{
                    Swal.fire({
                          text: data.message,
						  imageUrl: 'assets/images/crypto/error.svg',
						  imageWidth: 400,
						  imageHeight: 200,
						  imageAlt: 'Custom image',
                        }).then(function() {
                        });	
                }
            },
            error: function() {
                Swal.fire({
                            icon: 'error',
                            title: $('#data-validation-error-swal-header').text(),
                            text: $('#data-validation-problem-with-connection').text(),
                            showConfirmButton: true,
                            confirmButtonText: "Ok",
                            }).then(function() {
                                
                    });
            }
        });             	
    }
}

function fnCreateClaimableBalance (security, hasMnemonic){
    $( "#transfer-coin-form-cb" ).validate( {
        rules: {
            sender_asset_cb: {
                required: true
            },
            input_receiver_cb: {
                required: true
            },
            sendamount_cb: {
                required: true
            }
            
        },
        messages: {
            sender_asset_cb: {
                required: $('#pay-anyone-data-validation-error-from').text()
            },
            input_receiver_cb: {
                required: $('#pay-anyone-data-validation-error-sendto').text()
            },
            sendamount_cb: {
                required: $('#pay-anyone-data-validation-error-amounttosend').text()
            }
			
        },
        errorElement: "em",
        errorPlacement: function ( error, element ) {
            // Add the `invalid-feedback` class to the error element
            error.addClass( "invalid-feedback" );
            if ( element.prop( "type" ) === "checkbox" ) {
                error.insertAfter( element.next( "label" ) );
            } else {
                error.insertAfter( element );
            }
        },
        highlight: function ( element, errorClass, validClass ) {
            $( element ).addClass( "is-invalid" ).removeClass( "is-valid" );
        },
        unhighlight: function (element, errorClass, validClass) {
            $( element ).addClass( "is-valid" ).removeClass( "is-invalid" );
        }
    });
    if($( "#transfer-coin-form-cb" ).valid()){
	$('#spinner-div').show();//Load button clicked show spinner
        $('#transfer-coin-form-cb input[name="qs"]').val('porte');
        $('#transfer-coin-form-cb input[name="rules"]').val('cust_create_claimable_balance');
        
        var formData = new FormData($('#transfer-coin-form-cb')[0]);
		formData.append('security',security);
		formData.append('hasMnemonic',hasMnemonic);
		formData.append("hdnlang", $('#lang_def').text());
        for (var pair of formData.entries()) {
          console.log(pair[0] + " - " + pair[1]);
        }	
        $.ajaxSetup({
            beforeSend: function(xhr) {
                xhr.setRequestHeader('x-api-key' , getAPIKey());
            }
        });
        $.ajax({
            url: 'ms',
            data: formData,
            processData: false,
            contentType: false,
            type: 'POST',
            success: function (result) {
                $('#spinner-div').hide();//Request is complete so hide spinner
                var data = JSON.parse(result);
                console.log('data ',data);
                if(data.error=='false'){
                    Swal.fire({
                        text: data.message,
					  	imageUrl: 'assets/images/crypto/success.svg',
					  	imageWidth: 400,
					  	imageHeight: 200,
					  	imageAlt: 'Custom image',
                    }).then(function() {
                        $('#post-form').attr('action', 'ws');
                        $('input[name="qs"]').val('porte');
                        $('input[name="rules"]').val('Display Transactions');
                        $("#post-form").submit();
                    });	
                }else{
                    Swal.fire({
                        text: data.message,
						  imageUrl: 'assets/images/crypto/error.svg',
						  imageWidth: 400,
						  imageHeight: 200,
						  imageAlt: 'Custom image',
                        }).then(function() {
                        });	
                }
            },
            error: function() {
                Swal.fire({
                            icon: 'error',
                            title: $('#data-validation-error-swal-header').text(),
                            text: $('#data-validation-problem-with-connection').text(),
                            showConfirmButton: true,
                            confirmButtonText: "Ok",
                            }).then(function() {
                                
                    });
            }
        });             	
    }
}

/* function fnGetlastFiveTxn(){

    $('#post-form input[name="qs"]').val('porte');
    $('#post-form input[name="rules"]').val('get_last_five_porte_txn');
    
    var formData = new FormData($('#post-form')[0]);
    for (var pair of formData.entries()) {
      console.log(pair[0] + " - " + pair[1]);
    }	
    $.ajaxSetup({
        beforeSend: function(xhr) {
            xhr.setRequestHeader('x-api-key' , getAPIKey());
        }
    });
    $.ajax({
        url: 'ms',
        data: formData,
        processData: false,
        contentType: false,
        type: 'POST',
        success: function (result) {
            //wallet_txn
            var data = JSON.parse(result);
            var htmlData ='';
            var txnList = data.data;
            $('#div_transactions').html('');
            console.log('data ',data);
            if(data.error=='false'){
                console.log('length is ', txnList.length)
                if(txnList.length>0){
                    htmlData+=`<h2 class="dashboard-title">Transaction</h2>`;
                    for (i=0; i<txnList.length;i++){
                        if(txnList[i].txnMode === "D"){
                            htmlData+=` <div class="wallet-transaction-box clearfix">
                                            <div class="wallet-transaction-ico sent-coin-transaction"><i class="fa fa-arrow-up"></i></div>
                                            <div class="wallet-transaction-name">
                                                <h3>`+txnList[i].assetCode+`</h3>
                                                <span>Sent</span>
                                            </div>
                                            <div class="wallet-transaction-balance">
                                            <h3>`+txnList[i].txnAmount+`</h3>
                                            <span>`+txnList[i].txnDateTime+`</span>
                                            </div>
                                        </div>`   
                      
                        }else if(txnList[i].txnMode === "C"){
                            htmlData+=`<div class="wallet-transaction-box clearfix">
                                            <div class="wallet-transaction-ico recive-coin-transaction"><i class="fa fa-arrow-down"></i></div>
                                            <div class="wallet-transaction-name">
                                                <h3>`+txnList[i].assetCode+`</h3>
                                                <span>Receive</span>
                                            </div>
                                            <div class="wallet-transaction-balance">
                                                <h3>`+txnList[i].txnAmount+`</h3>
                                                <span>`+txnList[i].txnDateTime+`</span>
                                            </div>
                                        </div>`
                        }

                    }
                }else{
                    htmlData=`<tr><td> <span>No data Present</span></td></tr>`
                }
                $('#div_transactions').append(htmlData);
               
            }else{
                Swal.fire({
                    icon: 'error',
                    title: 'Oops',
                    text: 'Failed to get Transactions',
                    showConfirmButton: true,
                    confirmButtonText: "Ok",
                    closeOnConfirm: true,
                    }).then(function() {
                       
            });
            }
        },
        error: function() {
            Swal.fire({
                        icon: 'error',
                        title: 'Oops',
                        text: 'Problem with connection',
                        showConfirmButton: true,
                        confirmButtonText: "Ok",
                        }).then(function() {
                            
                });
        }
    });             	
    
}
 */
function checkIfUserHasMneonicCode(txnType){
	var formData = new FormData();
	formData.append('qs','porte')
	formData.append('rules','check_if_customer_has_mnemonic_code')
    for (var pair of formData.entries()) {
      //console.log(pair[0] + " - " + pair[1]);
    }	
    $.ajaxSetup({
        beforeSend: function(xhr) {
            xhr.setRequestHeader('x-api-key' , getAPIKey());
        }
    });
    $.ajax({
        url: 'ms',
        data: formData,
        processData: false,
        contentType: false,
        type: 'POST',
        success: function (result) {
            //wallet_txn
            var data = JSON.parse(result);
            var htmlData ='';
            var txnList = data.data;
            if(data.error=='false'){
                if(data.hasmnemonic=='true'){
                    fnPassword(data.hasmnemonic, txnType);
                }else{
                    fnPrivateKey(data.hasmnemonic, txnType)
                }
               
            }else{
                Swal.fire({
                    icon: 'error',
                    title: $('#data-validation-error-swal-header').text(),
                    text: data.message,
                    showConfirmButton: true,
                    confirmButtonText: "Ok",
                    closeOnConfirm: true,
                    }).then(function() {
                       
            });
            }
        },
        error: function() {
            Swal.fire({
                        icon: 'error',
                        title: $('#data-validation-error-swal-header').text(),
                        text: $('#data-validation-problem-with-connection').text(),
                        showConfirmButton: true,
                        confirmButtonText: "Ok",
                        }).then(function() {
                            
                });
        }
    });             	
	
}

function fnPassword(hasMnemonic, txnType){
	const { value: password   } = Swal.fire({
		title: $('#enter-your-passsword-tittle').text(),
		input: 'password',
		inputLabel: $('#enter-your-passsword-label').text(),
		showCancelButton: true,
		inputAttributes: {
		autocapitalize: 'off',
		autocorrect: 'off'
		},
		inputValidator: (value) => {
		if (!value) {
			return $('#data-validation-enter-your-passsword-label').text();
		}
		}
	}).then((result) => {
			if (result.value) {
				var passwordVal = result.value;
				fnGetTxnType(txnType, passwordVal,hasMnemonic );
			}
		});
}

function fnPrivateKey(hasMnemonic, txnType){
	const { value: password   } = Swal.fire({
		title: $('#enter-your-pvt-key-label').text(),
		input: 'password',
		inputLabel: $('#enter-your-passsword-label').text(),
		showCancelButton: true,
		inputAttributes: {
			autocapitalize: 'off',
			autocorrect: 'off'
		},
		inputValidator: (value) => {
		if (!value) {
			return $('#data-validation-enter-your-pvt-key-label').text();
		}
		}
	}).then((result) => {
			if (result.value) {
				var privatekey = result.value;
				fnGetTxnType(txnType, privatekey,hasMnemonic );
			}
		});
}

function fnGetTxnType(txnType, security,hasMnemonic){
    console.log('txnType ', txnType);
    if(txnType =='cb'){
        console.log('txnType1 ', txnType);
        fnCreateClaimableBalance(security,hasMnemonic);
    }else{
        console.log('txnType2 ', txnType);
        fnTransferCoin(security,hasMnemonic );
    }
}

function fnCallClaimaleBalancePage(){
    $('#post-form').attr('action', 'ws');
    $('input[name="qs"]').val('porte');
    $('input[name="rules"]').val('view_claimable_balance');
    $("#post-form").submit();	
}
