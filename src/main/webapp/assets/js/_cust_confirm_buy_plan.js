	i18next.init({
	lng: 'EN',
	fallbackLng: 'EN',
	debug: false,
	resources: {
	  EN: {
		translation: {
             /* Menus */
			"idnavmenu_Dashboard":"Dashboard",
			"idnavmenu_ManageFiatWallet":"Manage Fiat Wallet",
			"idnavmenu_DigitalAssets":"Digital Assets",
			"idnavmenu_DigitalAssets":"Digital Assets",
			"idnavmenu_CurrencyRemittance":"Currency Remittance",
			"idnavmenu_ManageCards":"Manage Cards",
			"idnavmenu_Loyalty":"Loyalty",
			"idnavmenu_UpdatePlan":"Update Plan",
			"idnavmenu_Logout":"Logout",
			"idnavmenu_BuyNewPlan":"Buy New Plan",
			"header_buy_porte_token":"Buy Porte Token",
			"btn_buy_coin":"Buy Coin",
			"idnavmenu_Profile":"Profile",
			"idnavmenu_Disputes":"Disputes",
             /* Sub Menus */
            "idnavsubmenu_Dashboard":"Dashboard",
            "idnavsubmenu_ViewandEdit":"View and Edit",
            "idnavsubmenu_ViewWallet":"View Wallet",
            "idnavsubmenu_TopupWallet":"Topup Wallet",
            "idnavsubmenu_SendMoney":"Send Money",
            "idnavsubmenu_CashTransactions":"Cash Transactions",
            "idnavsubmenu_SetupWallet":"Set up Wallet",
            "idnavsubmenu_Bitcoin":"Bitcoin",
            "idnavsubmenu_Assets":"Assets",
            "idnavsubmenu_BuyAsset":"Buy Asset",
            "idnavsubmenu_TransferCoin":"Transfer Coin",
            "idnavsubmenu_Swap":"Swap",
            "idnavsubmenu_SellAssettoFiat":"Sell Asset to Fiat",
            "idnavsubmenu_DisplayTransactions":"Display Transactions",
            "idnavsubmenu_DigitalRemittance":"Digital Remittance",
            "idnavsubmenu_FiatRemittance":"Fiat Remittance",
            "idnavsubmenu_ShowCards":"Show Cards",
            "idnavsubmenu_RedeemPoints":"Redeem Points",
            "idnavsubmenu_ViewDispute":"View Dispute",
            "idnavsubmenu_RaiseDisputes":"Raise Disputes",
            "idnavsubmenu_ChangeYourPlan":"Change Your Plan",
            "idnavsubmenu_BuyNewPlan":"Buy New Plan",
			
            /* Quick links */
            "idnav_UserSettings":"User Settings",
            "idnav_UpdateProfile":"Update Profile",
            "idnav_Logout":"Logout",
             /* Specific Page Content */
				"breadcrumb_item_label":"Plans",
				"breadcrumb_item_active_label":"Buy Plan",
				"label_select_plan":"Select Your Plan below",
				"label_conf_payments":"Confirm your Payment Details",
				"label_item":"Item",
				"label_quantity":"Quantity",
				"label_unit_price":"Unit Price",
				"label_sub_total":"Sub Total",
				"label_payment_option":"Payment Options",
				"label_wallet_option":"Wallet Option",
				"label_card_option":"Card Option",
				"label_select_wallet":"Select Your Wallet to Buy Plan :",
				"label_wallet_plan":"Wallet Number",
				"label_wallet_desc":"Wallet Description",
				"label_wallet_bal":"Wallet Balance",
				"label_last_updated":"Last Updated",
				"label_action":"Action",
				"label_select_btn":"Select",
				"label_no_wallet":"No Wallet Present",
				"label_select_card":"Select Your Card to Buy Plan",
				"label_cardno":"Card Number",
				"label_card_alias":"Card Alias",
				"label_card_action":"Action",
				"label_select_card_btn":"Select",
				"label_no_cards":"No Cards Present",
				"label_card_conf_payment":"Confirm your payment using Card",
				"label_card_plan_name":"Plan Name",
				"label_card_plan_price":"Plan Price",
				"label_card_details":"Card Details",
				"label_card_cvv":"CVV",
				"label_card_comments":"Comments (max 50 chars)",
				"label_card_close_btn":"Close",
				"label_card_pay_btn":"Pay",
				"label_wallet_conf_payment":"Confirm your payment using Wallet",
				"label_wallet_plan_name":"Plan Name",
				"label_wallet_plan_price":"Plan Price",
				"label_walletid":"Wallet Id",
				"label_wallet_description":"Wallet Description",
				"label_wallet_comments":"Comments (max 50 chars)",
				"label_wallet_close_btn":"Close",
				"label_wallet_pay_btn":"Pay",
				"validation_cvv":"Please enter CVV",
				"validation_comments":"Please enter Comments",
				"payment_done_successful":"Payment Successfully Done",
				"login_again":"Please log in again to access new functions",
				"wal_bal_insufficient":"Your wallet balance insufficient",
				"topup_wallet":"Please top-up your wallet",
				"success_header":"Success",
				"error_swal_header":"Oops",
				"error_swal_checkdata":"Please check data",
				"swal_prob_connection":"Problem with connection",		
		}
	  },
	  ES: {
		  translation: {
			/* Menus */
			"idnavmenu_Dashboard":"Tablero",
			"idnavmenu_ManageFiatWallet":"Administrar Monedero Fiat",
			"idnavmenu_DigitalAssets":"Recursos digitales",
			"idnavmenu_CurrencyRemittance":"Remesa de divisas",
			"idnavmenu_ManageCards":"Administrar tarjetas",
			"idnavmenu_Loyalty":"Lealtad",
			"idnavmenu_UpdatePlan":"Actualizar plan",
			"idnavmenu_Logout":"Cerrar sesión",
			"idnavmenu_BuyNewPlan":"Comprar nuevo plan",
			"header_buy_porte_token":"Comprar Token de Porte",
			"btn_buy_coin":"Comprar moneda",
			"idnavmenu_Profile":"Perfil",
             /* Sub Menus */
            "idnavsubmenu_Dashboard":"Tablero",
            "idnavsubmenu_ViewandEdit":"Ver y editar",
            "idnavsubmenu_ViewWallet":"Ver billetera",
            "idnavsubmenu_TopupWallet":"Monedero de recarga",
            "idnavsubmenu_SendMoney":"Enviar dinero",
            "idnavsubmenu_CashTransactions":"Transacciones en efectivo",
            "idnavsubmenu_SetupWallet":"Configurar Monedero",
            "idnavsubmenu_Bitcoin":"Bitcoin",
            "idnavsubmenu_Assets":"Activos",
            "idnavsubmenu_BuyAsset":"Comprar activo",
            "idnavsubmenu_TransferCoin":"Comprar juego de monedas ATransfer",
            "idnavsubmenu_Swap":"Intercambio",
            "idnavsubmenu_SellAssettoFiat":"Vender activos a Fiat",
            "idnavsubmenu_DisplayTransactions":"Mostrar transacciones",
            "idnavsubmenu_DigitalRemittance":"Remesas digitales",
            "idnavsubmenu_FiatRemittance":"Remesa fiduciaria",
            "idnavsubmenu_ShowCards":"Mostrar cartas",
            "idnavsubmenu_RedeemPoints":"Canjear puntos",
            "idnavsubmenu_ViewDispute":"Ver disputa",
            "idnavsubmenu_RaiseDisputes":"Plantear disputas",
            "idnavsubmenu_ChangeYourPlan":"Cambia tu plan",
            "idnavsubmenu_BuyNewPlan":"Comprar nuevo plan",
            /* Quick links */
            "idnav_UserSettings":"Ajustes de usuario",
            "idnav_UpdateProfile":"Actualización del perfil",
            "idnav_Logout":"Cerrar sesión",
             /* Specific Page Content */
			"breadcrumb_item_label":"Planes",
			"breadcrumb_item_active_label":"Comprar plan",
			"label_select_plan":"Seleccione su plan a continuación",
			"label_conf_payments":"Confirme sus detalles de pago",
			"label_item":"Artículo",
			"label_quantity":"Cantidad",
			"label_unit_price":"Precio unitario",
			"label_sub_total":"Subtotal",
			"label_payment_option":"Opciones de pago",
			"label_wallet_option":"Opción de billetera",
			"label_card_option":"Opción de tarjeta",
			"label_select_wallet":"Seleccione su billetera para comprar el plan:",
			"label_wallet_plan":"Número de billetera",
			"label_wallet_desc":"Descripción de la billetera",
			"label_wallet_bal":"Saldo de la cartera",
			"label_last_updated":"Última actualización",
			"label_action":"Acción",
			"label_select_btn":"Seleccionar",
			"label_no_wallet":"No hay monedero presente",
			"label_select_card":"Seleccione su tarjeta para comprar un plan",
			"label_cardno":"Número de tarjeta",
			"label_card_alias":"Alias ​​de la tarjeta",
			"label_card_action":"Acción",
			"label_select_card_btn":"Seleccionar",
			"label_no_cards":"No hay tarjetas presentes",
			"label_card_conf_payment":"Confirma tu pago con Tarjeta",
			"label_card_plan_name":"Nombre del plan",
			"label_card_plan_price":"Precio del plan",
			"label_card_details":"Detalles de la tarjeta",
			"label_card_cvv":"CVV",
			"label_card_comments":"Comentarios (máximo 50 caracteres)",
			"label_card_close_btn":"Cerrar",
			"label_card_pay_btn":"Pagar",
			"label_wallet_conf_payment":"Confirme su pago usando Wallet",
			"label_wallet_plan_name":"Nombre del plan",
			"label_wallet_plan_price":"Precio del plan",
			"label_walletid":"Identificación de la billetera",
			"label_wallet_description":"Descripción de la billetera",
			"label_wallet_comments":"Comentarios (máx. 50 caracteres)",
			"label_wallet_close_btn":"Cerrar",
			"label_wallet_pay_btn":"Pagar",
			"validation_cvv":"Ingrese CVV",
			"validation_comments":"Ingrese los comentarios",
			"payment_done_successful":"Pago realizado con éxito",
			"login_again":"Inicie sesión nuevamente para acceder a nuevas funciones",
			"wal_bal_insufficient":"El saldo de tu billetera es insuficiente",
			"topup_wallet":"Por favor, recargue su billetera",
			"success_header":"Éxito",
			"error_swal_header":"Vaya",
			"error_swal_checkdata":"Verifique los datos",
			"swal_prob_connection":"Problema con la conexión",
			
			}
		},
	}
  }, function(err, t) {
	   updateContent();
  });
  
  function updateContent() {
        /* Menus */
        $('#idnavmenu_Dashboard').text(i18next.t('idnavmenu_Dashboard')); 
        $('#idnavmenu_ManageFiatWallet').text(i18next.t('idnavmenu_ManageFiatWallet')); 
        $('#idnavmenu_DigitalAssets').text(i18next.t('idnavmenu_DigitalAssets')); 
        $('#idnavmenu_CurrencyRemittance').text(i18next.t('idnavmenu_CurrencyRemittance')); 
        $('#idnavmenu_ManageCards').text(i18next.t('idnavmenu_ManageCards')); 
        $('#idnavmenu_Loyalty').text(i18next.t('idnavmenu_Loyalty')); 
        $('#idnavmenu_UpdatePlan').text(i18next.t('idnavmenu_UpdatePlan')); 
        $('#idnavmenu_Logout').text(i18next.t('idnavmenu_Logout')); 
        $('#idnavmenu_BuyNewPlan').text(i18next.t('idnavmenu_BuyNewPlan')); 
        $('#header_buy_porte_token').text(i18next.t('header_buy_porte_token')); 
        $('#btn_buy_coin').text(i18next.t('btn_buy_coin')); 
        $('#idnavmenu_Profile').text(i18next.t('idnavmenu_Profile')); 
        $('#idnavmenu_Disputes').text(i18next.t('idnavmenu_Disputes')); 
        /* Sub Menus */
        $('#idnavsubmenu_Dashboard').text(i18next.t('idnavsubmenu_Dashboard')); 
        $('#idnavsubmenu_ViewandEdit').text(i18next.t('idnavsubmenu_ViewandEdit')); 
        $('#idnavsubmenu_ViewWallet').text(i18next.t('idnavsubmenu_ViewWallet')); 
        $('#idnavsubmenu_TopupWallet').text(i18next.t('idnavsubmenu_TopupWallet')); 
        $('#idnavsubmenu_SendMoney').text(i18next.t('idnavsubmenu_SendMoney')); 
        $('#idnavsubmenu_CashTransactions').text(i18next.t('idnavsubmenu_CashTransactions')); 
        $('#idnavsubmenu_SetupWallet').text(i18next.t('idnavsubmenu_SetupWallet')); 
        $('#idnavsubmenu_Bitcoin').text(i18next.t('idnavsubmenu_Bitcoin')); 
        $('#idnavsubmenu_Assets').text(i18next.t('idnavsubmenu_Assets')); 
        $('#idnavsubmenu_BuyAsset').text(i18next.t('idnavsubmenu_BuyAsset')); 
        $('#idnavsubmenu_TransferCoin').text(i18next.t('idnavsubmenu_TransferCoin')); 
        $('#idnavsubmenu_Swap').text(i18next.t('idnavsubmenu_Swap')); 
        $('#idnavsubmenu_SellAssettoFiat').text(i18next.t('idnavsubmenu_SellAssettoFiat')); 
        $('#idnavsubmenu_DisplayTransactions').text(i18next.t('idnavsubmenu_DisplayTransactions')); 
        $('#idnavsubmenu_DigitalRemittance').text(i18next.t('idnavsubmenu_DigitalRemittance')); 
        $('#idnavsubmenu_FiatRemittance').text(i18next.t('idnavsubmenu_FiatRemittance')); 
        $('#idnavsubmenu_ShowCards').text(i18next.t('idnavsubmenu_ShowCards')); 
        $('#idnavsubmenu_RedeemPoints').text(i18next.t('idnavsubmenu_RedeemPoints')); 
        $('#idnavsubmenu_ViewDispute').text(i18next.t('idnavsubmenu_ViewDispute')); 
        $('#idnavsubmenu_RaiseDisputes').text(i18next.t('idnavsubmenu_RaiseDisputes')); 
        $('#idnavsubmenu_ChangeYourPlan').text(i18next.t('idnavsubmenu_ChangeYourPlan')); 
        $('#idnavsubmenu_BuyNewPlan').text(i18next.t('idnavsubmenu_BuyNewPlan')); 
        /* Quick links */
        $('#idnav_UserSettings').text(i18next.t('idnav_UserSettings'));        
        $('#idnav_UpdateProfile').text(i18next.t('idnav_UpdateProfile'));        
        $('#idnav_Logout').text(i18next.t('idnav_Logout'));        
        /* Specific Page Content */
		$('#breadcrumb_item_label').text(i18next.t('breadcrumb_item_label'));
		$('#breadcrumb_item_active_label').text(i18next.t('breadcrumb_item_active_label'));
		$('#label_select_plan').text(i18next.t('label_select_plan'));
		$('#label_conf_payments').text(i18next.t('label_conf_payments'));
		$('#label_item').text(i18next.t('label_item'));
		$('#label_quantity').text(i18next.t('label_quantity'));
		$('#label_unit_price').text(i18next.t('label_unit_price'));
		$('#label_sub_total').text(i18next.t('label_sub_total'));
		$('#label_payment_option').text(i18next.t('label_payment_option'));
		$('#label_wallet_option').text(i18next.t('label_wallet_option'));
		$('#label_card_option').text(i18next.t('label_card_option'));
		$('#label_select_wallet').text(i18next.t('label_select_wallet'));
		$('#label_wallet_desc').text(i18next.t('label_wallet_desc'));
		$('#label_wallet_bal').text(i18next.t('label_wallet_bal'));
		$('#label_last_updated').text(i18next.t('label_last_updated'));
		$('#label_action').text(i18next.t('label_action'));
		$('#label_no_wallet').text(i18next.t('label_no_wallet'));
		$('#label_cardno').text(i18next.t('label_cardno'));
		$('#label_card_alias').text(i18next.t('label_card_alias'));
		$('#label_card_action').text(i18next.t('label_card_action'));
		$('#label_select_card_btn').text(i18next.t('label_select_card_btn'));
		$('#label_card_conf_payment').text(i18next.t('label_card_conf_payment'));
		$('#label_card_plan_name').text(i18next.t('label_card_plan_name'));
		$('#label_card_plan_price').text(i18next.t('label_card_plan_price'));
		$('#label_card_details').text(i18next.t('label_card_details'));
		$('#label_card_cvv').text(i18next.t('label_card_cvv'));
		$('#label_card_comments').text(i18next.t('label_card_comments'));
		$('#label_card_close_btn').text(i18next.t('label_card_close_btn'));
		$('#label_card_pay_btn').text(i18next.t('label_card_pay_btn'));
		$('#label_wallet_conf_payment').text(i18next.t('label_wallet_conf_payment'));
		$('#label_wallet_plan_name').text(i18next.t('label_wallet_plan_name'));
		$('#label_wallet_plan_price').text(i18next.t('label_wallet_plan_price'));
		$('#label_walletid').text(i18next.t('label_walletid'));
		$('#label_wallet_description').text(i18next.t('label_wallet_description'));
		$('#label_wallet_comments').text(i18next.t('label_wallet_comments'));
		$('#label_wallet_close_btn').text(i18next.t('label_wallet_close_btn'));
		$('#label_wallet_pay_btn').text(i18next.t('label_wallet_pay_btn'));
		$('#validation_cvv').text(i18next.t('validation_cvv'));
		$('#validation_comments').text(i18next.t('validation_comments'));
		$('#payment_done_successful').text(i18next.t('payment_done_successful'));
		$('#login_again').text(i18next.t('login_again'));
		$('#wal_bal_insufficient').text(i18next.t('wal_bal_insufficient'));
		$('#topup_wallet').text(i18next.t('topup_wallet'));
		$('#success_header').text(i18next.t('success_header'));
		$('#error_swal_header').text(i18next.t('error_swal_header'));
		$('#error_swal_checkdata').text(i18next.t('error_swal_checkdata'));
		$('#swal_prob_connection').text(i18next.t('swal_prob_connection'));

  }
	  function fnChangePageLanguage(lng){
		console.log('lng ',lng);
		  i18next.changeLanguage(lng, fnChangeLanguage(lng))
		  $('#hdnlangpref1').val(lng);
	  }
	  i18next.on('languageChanged', function(lng) {
		updateContent(lng);
	  });
	  function fnChangeLanguage(lang){
		  if(lang=='EN')  $('#lang_def').text('EN') 
			else if(lang=='ES')  $('#lang_def').text('ES')
	  }

	
	
	
	$(window).on("load", function(e) {
    $("#global-loader").fadeOut("slow");
})

	function fnConfirmCard(tokenid, cardalias, maskedcard, planid, plandesc, planduration, planprice ){

	if(maskedcard.startsWith("5")){
		$('#tokencardimage').attr('src','assets/images/cards/mastercard.png');
	}else if(maskedcard.startsWith("4")){
		$('#tokencardimage').attr('src','assets/images/cards/visa.png');
	}else if(maskedcard.startsWith("3")){
		$('#tokencardimage').attr('src','assets/images/cards/amex.png');
	}

	   $('input[name="hdntokenidbycard"]').val(tokenid);
	   $('input[name="hdnplanidbycard"]').val(planid);
	   
	   $('input[name="tokenplandesc"]').val(plandesc);
	   $('input[name="tokenplanduration"]').val(planduration);
	   $('input[name="tokenplanprice"]').val(planprice);
	   $('input[name="tokencarddetails"]').val(maskedcard);
	   // show the modal now
	   $('#PayWithCardsModal').modal('show');
		}
		
	
		$('#btn-submit-card-final').click(function() {
			//Check for the data validation	
			$("#paybycardtoken-form").validate({
				rules: {
					tokencvv2: {
						required: true,
						number: true,
						maxlength: 3
					},
					tokencomments: {
						required: true
					}
				},
				messages: {
					tokencvv2: {
						required: $('#validation_cvv').text(),
					},
					tokencomments: {
						required: $('#validation_comments').text(),
					}
				},
				errorElement: "em",
				errorPlacement: function(error, element) {
					// Add the `invalid-feedback` class to the error element
					error.addClass("invalid-feedback");
					if (element.prop("type") === "checkbox") {
						error.insertAfter(element.next("label"));
					} else {
						error.insertAfter(element);
					}
				},
				highlight: function(element, errorClass, validClass) {
					$(element).addClass("is-invalid").removeClass("is-valid");
				},
				unhighlight: function(element, errorClass, validClass) {
					$(element).addClass("is-valid").removeClass("is-invalid");
				}
			});
		
		
			if ($("#paybycardtoken-form").valid()) {
		
				$('#paybycardtoken-form').attr('action', 'ms');
				if($('input[name="hdncardoriginalplanid"]').val()==''){
						$('input[name="qs"]').val('plb');
				   }else{
					   $('input[name="qs"]').val('plu');
				   }
				$('input[name="rules"]').val('custbuyplanwithtoken');     
				var formData = new FormData($('#paybycardtoken-form')[0]);
					formData.append("hdnlang",$('#lang_def').text());
				  // Call Ajax here and submit the form 							
							$.ajaxSetup({
							  beforeSend: function(xhr) {
								  xhr.setRequestHeader('x-api-key' , getAPIKey());
							  }
						  });				
						  $.ajax({
							  url: 'ms',
							  data: formData,
							  processData: false,
							  contentType: false,
							  type: 'POST',
							  success: function (result) {
								  if (result) {
									  var data = JSON.parse(result);
									   if(data.error=='false'){
									//       console.log("no error");
											  Swal.fire({
													   icon: 'success',
													 title: $('#success_header').text(),
													   text: data.message,
													   footer: $('#login_again').text(),
													   showConfirmButton: true,
													   confirmButtonText: "Ok",
												   }).then(function() {
														   $('#tempform').attr('action', 'ws');
														   $('input[name="qs"]').val('lgt');
														   $('input[name="rules"]').val('lgtdefault');
														   $("#tempform").submit();	
												   });	
										   }else{
										   //swal.fire('Error message');
												 Swal.fire({
												 title: "Ooops",              
												 text: data.message, 
												 icon: "error",
											   showConfirmButton: true,
											   confirmButtonText: "Ok",
											   }).then(function() {
													$(".modal").modal('hide');												
											   });	
										   } 
								  }
							   },
							   error: function() {
								  Swal.fire({
											  icon: 'error',
											  title: 'Oops',
											  text: $('#swal_prob_connection').text(),
											  showConfirmButton: true,
											  confirmButtonText: "Ok",
											  }).then(function() {
												  $(".modal").modal('hide');												
												  
									  }); 
							  }
						  });				
				
		
			} else {
				Swal.fire({
					icon: 'error',
					 title: $('#error_swal_header').text(),
					 text: $('#error_swal_checkdata').text()
				})
				return false;
			}
		});	

	function fnConfirmWallet(walletid, walletdesc, walletbal, planid, plandesc, planduration, planprice ){
	   $('input[name="paywalletid"]').val(walletid);
	   $('input[name="paywalletdesc"]').val(walletdesc);
	   $('input[name="hdnwalletbal"]').val(walletbal);
	   $('input[name="hdnplanidbywallet"]').val(planid);
	   $('input[name="walletplandesc"]').val(plandesc);
	   $('input[name="walletplanduration"]').val(planduration);
	   $('input[name="walletplanprice"]').val(planprice);
	   // show the modal now
	   $('#PayWithWalletModal').modal('show');
		}

		$('#btn-submit-wallet-final').click(function() {
			//Check for the data validation	
			$("#paybywallet-form").validate({
				rules: {
					paywalletcomments: {
						required: true
					}
				},
				
				messages: {
					paywalletcomments: {
						required: $('#validation_comments').text(),
					}
				},
				errorElement: "em",
				errorPlacement: function(error, element) {
					// Add the `invalid-feedback` class to the error element
					error.addClass("invalid-feedback");
					if (element.prop("type") === "checkbox") {
						error.insertAfter(element.next("label"));
					} else {
						error.insertAfter(element);
					}
				},
				highlight: function(element, errorClass, validClass) {
					$(element).addClass("is-invalid").removeClass("is-valid");
				},
				unhighlight: function(element, errorClass, validClass) {
					$(element).addClass("is-valid").removeClass("is-invalid");
				}
			});
		
		
			if ($("#paybywallet-form").valid()) {				
				var walletBal=$('input[name="hdnwalletbal"]').val();
				var price= $('input[name="walletplanprice"]').val();
				console.log('walwalletplanpriceletBal ',walletBal.replaceAll(',',''));
				console.log('price ',price.replaceAll(',',''));
				if(parseInt(walletBal.replaceAll(',',''))< parseInt(price.replaceAll(',','')) ){
									
				Swal.fire({          
					 text: $('#wal_bal_insufficient').text(),
					 icon: "error",
					 footer: $('#topup_wallet').text(),
				   showConfirmButton: true,
				   confirmButtonText: "Ok",
				   }).then(function() {
					   // hide all modal
						$(".modal").modal('hide');												
				   });	
					return false;				   
				}
		
				$('#paybywallet-form').attr('action', 'ms');
				
			   if($('input[name="hdnwalletoriginalplanid"]').val()==''){
					$('input[name="qs"]').val('plb');
			   }else{
				   $('input[name="qs"]').val('plu');
			   }
				//$('input[name="qs"]').val('plb');
				$('input[name="rules"]').val('custbuyplanwithwallet');     
				var formData = new FormData($('#paybywallet-form')[0]);
			    	formData.append("hdnlang",$('#lang_def').text());
				  // Call Ajax here and submit the form 							
							$.ajaxSetup({
							  beforeSend: function(xhr) {
								  xhr.setRequestHeader('x-api-key' , getAPIKey());
							  }
						  });				
						  $.ajax({
							  url: 'ms',
							  data: formData,
							  processData: false,
							  contentType: false,
							  type: 'POST',
							  success: function (result) {
								  if (result) {
									  var data = JSON.parse(result);
									   if(data.error=='false'){
									//       console.log("no error");
										
											  Swal.fire({
													   icon: 'success',
													   title: $('#success_header').text(),
													   text: data.message,
													   footer:$('#login_again').text(),
													   showConfirmButton: true,
													   confirmButtonText: "Ok",
												   }).then(function() {
														   $('#tempform').attr('action', 'ws');
														   $('input[name="qs"]').val('lgt');
														   $('input[name="rules"]').val('lgtdefault');
														   $("#tempform").submit();	
												   });	
										   }else{
										   //swal.fire('Error message');
												 Swal.fire({
												 title: "Oops",              
												 text: data.message, 
												 icon: "error",
											   showConfirmButton: true,
											   confirmButtonText: "Ok",
											   }).then(function() {
													$(".modal").modal('hide');												
											   });	
										   } 
								  }
							   },
							   error: function() {
								  Swal.fire({
											  icon: 'error',
											  title: 'Oops',
											  text:	$('#swal_prob_connection').text(),
											  showConfirmButton: true,
											  confirmButtonText: "Ok",
											  }).then(function() {
													  $(".modal").modal('hide');												
												  
									  }); 
							  }
						  });				
				
		
			} else {
				Swal.fire({
					icon: 'error',
					title: $('#error_swal_header').text(),
					text: $('#error_swal_checkdata').text()
					//footer: '<a href>Why do I have this issue?</a>'
				})
				return false;
			}
		});	


String.prototype.replaceAll = function (stringToFind, stringToReplace) {
	if (stringToFind === stringToReplace) return this;
	var temp = this;
	var index = temp.indexOf(stringToFind);
	while (index != -1) {
	temp = temp.replace(stringToFind, stringToReplace);
	index = temp.indexOf(stringToFind);
	}
	return temp;
};
$("button[data-dismiss=modal]").click(function(){
		$(".modal").modal('hide');
	});
 
