i18next.init({
	lng: 'EN',
	fallbackLng: 'EN',
	debug: false,
	resources: {
	  EN: {
		translation: {
             /* Menus */
			"idnavmenu_Dashboard":"Dashboard",
			"idnavmenu_ManageFiatWallet":"Manage Fiat Wallet",
			"idnavmenu_DigitalAssets":"Digital Assets",
			"idnavmenu_DigitalAssets":"Digital Assets",
			"idnavmenu_CurrencyRemittance":"Currency Remittance",
			"idnavmenu_ManageCards":"Manage Cards",
			"idnavmenu_Loyalty":"Loyalty",
			"idnavmenu_UpdatePlan":"Update Plan",
			"idnavmenu_Logout":"Logout",
			"idnavmenu_BuyNewPlan":"Buy New Plan",
			"header_buy_porte_token":"Buy Porte Token",
			"btn_buy_coin":"Buy Coin",
			"idnavmenu_Profile":"Profile",
			"idnavmenu_Disputes":"Disputes",
             /* Sub Menus */
            "idnavsubmenu_Dashboard":"Dashboard",
            "idnavsubmenu_ViewandEdit":"View and Edit",
            "idnavsubmenu_ViewWallet":"View Wallet",
            "idnavsubmenu_TopupWallet":"Topup Wallet",
            "idnavsubmenu_SendMoney":"Send Money",
            "idnavsubmenu_CashTransactions":"Cash Transactions",
            "idnavsubmenu_SetupWallet":"Set up Wallet",
            "idnavsubmenu_Bitcoin":"Bitcoin",
            "idnavsubmenu_Assets":"Assets",
            "idnavsubmenu_BuyAsset":"Buy Asset",
            "idnavsubmenu_TransferCoin":"Transfer Coin",
            "idnavsubmenu_Swap":"Swap",
            "idnavsubmenu_SellAssettoFiat":"Sell Asset to Fiat",
            "idnavsubmenu_DisplayTransactions":"Display Transactions",
            "idnavsubmenu_DigitalRemittance":"Digital Remittance",
            "idnavsubmenu_FiatRemittance":"Fiat Remittance",
            "idnavsubmenu_ShowCards":"Show Cards",
            "idnavsubmenu_RedeemPoints":"Redeem Points",
            "idnavsubmenu_ViewDispute":"View Dispute",
            "idnavsubmenu_RaiseDisputes":"Raise Disputes",
            "idnavsubmenu_ChangeYourPlan":"Change Your Plan",
            "idnavsubmenu_BuyNewPlan":"Buy New Plan",
			
            /* Quick links */
            "idnav_UserSettings":"User Settings",
            "idnav_UpdateProfile":"Update Profile",
            "idnav_Logout":"Logout",
             /* Specific Page Content */
			"breadcrumb-item-manage-wallets":"Manage Wallet",
			"breadcrumb-item-topup-wallet":"Topup Wallet",
			"topupwallet_label":"Topup Wallet by:-",
			"spn-nav-link-cards":"Cards",
			"spn-nav-link-bank":"Bank",
			"spn-select-card":"Select card",
			"amount-label":"Amount",
			"cvv-label":"CVV",
			"dont-store-cvv-label":"(We don't store CVV)",
			"btn-topup-label":"Topup",
			"spn-coming-soon":"Coming Soon",
			"data-validation-error-swal-header":"Oops..",
			"data-validation-error-failed-to-get-details":"Failed to get details",
			"data-validation-problem-with-connection":"Problem with connection",
			"data-validation-check-your-data":"Please check your data",
			"data-no-cards-present-data":"No Cards Present Please",
			"data-no-click-here-to-register":"Click here to register.",
			"data-validation-select-card":"Please select card",
			"data-no-click-enter-amount":"Please enter amount",
			"data-no-click-enter-cvv":"Please enter cvv",
			"data-success-header":"Success",
			"data-topup-successful":"Topup Successful",
			
			
			
		}
	  },
	  ES: {
		  translation: {
			/* Menus */
			"idnavmenu_Dashboard":"Tablero",
			"idnavmenu_ManageFiatWallet":"Administrar Monedero Fiat",
			"idnavmenu_DigitalAssets":"Recursos digitales",
			"idnavmenu_CurrencyRemittance":"Remesa de divisas",
			"idnavmenu_ManageCards":"Administrar tarjetas",
			"idnavmenu_Loyalty":"Lealtad",
			"idnavmenu_UpdatePlan":"Actualizar plan",
			"idnavmenu_Logout":"Cerrar sesión",
			"idnavmenu_BuyNewPlan":"Comprar nuevo plan",
			"header_buy_porte_token":"Comprar Token de Porte",
			"btn_buy_coin":"Comprar moneda",
			"idnavmenu_Profile":"Perfil",
             /* Sub Menus */
            "idnavsubmenu_Dashboard":"Tablero",
            "idnavsubmenu_ViewandEdit":"Ver y editar",
            "idnavsubmenu_ViewWallet":"Ver billetera",
            "idnavsubmenu_TopupWallet":"Monedero de recarga",
            "idnavsubmenu_SendMoney":"Enviar dinero",
            "idnavsubmenu_CashTransactions":"Transacciones en efectivo",
            "idnavsubmenu_SetupWallet":"Configurar Monedero",
            "idnavsubmenu_Bitcoin":"Bitcoin",
            "idnavsubmenu_Assets":"Activos",
            "idnavsubmenu_BuyAsset":"Comprar activo",
            "idnavsubmenu_TransferCoin":"Comprar juego de monedas ATransfer",
            "idnavsubmenu_Swap":"Intercambio",
            "idnavsubmenu_SellAssettoFiat":"Vender activos a Fiat",
            "idnavsubmenu_DisplayTransactions":"Mostrar transacciones",
            "idnavsubmenu_DigitalRemittance":"Remesas digitales",
            "idnavsubmenu_FiatRemittance":"Remesa fiduciaria",
            "idnavsubmenu_ShowCards":"Mostrar cartas",
            "idnavsubmenu_RedeemPoints":"Canjear puntos",
            "idnavsubmenu_ViewDispute":"Ver disputa",
            "idnavsubmenu_RaiseDisputes":"Plantear disputas",
            "idnavsubmenu_ChangeYourPlan":"Cambia tu plan",
            "idnavsubmenu_BuyNewPlan":"Comprar nuevo plan",
            /* Quick links */
            "idnav_UserSettings":"Ajustes de usuario",
            "idnav_UpdateProfile":"Actualización del perfil",
            "idnav_Logout":"Cerrar sesión",
             /* Specific Page Content */
			//"greeting":"Cliente",
			"breadcrumb-item-manage-wallets":"Administrar billetera",
			"breadcrumb-item-topup-wallet":"Monedero de recarga",
			"topupwallet_label":"Monedero de recarga por: -",
			"spn-nav-link-cards":"Tarjetas",
			"spn-select-card":"Seleccionar tarjeta",
			"amount-label":"Monto",
			"cvv-label":"CVV",
			"dont-store-cvv-label":"(No almacenamos CVV)",
			"btn-topup-label":"Recargar",
			"spn-coming-soon":"Próximamente, en breve, pronto",
			"data-validation-error-swal-header":"Ups..",
			"data-validation-error-failed-to-get-details":"Error al obtener detalles",
			"data-validation-problem-with-connection":"problema con la conexion",
			"data-validation-check-your-data":"Por favor revisa tus datos",
			"data-no-cards-present-data":"No hay tarjetas presentes por favor",
			"data-no-click-here-to-register":"Pulse aquí para registrarse.",
			"data-validation-select-card":"Por favor, seleccione la tarjeta",
			"data-no-click-enter-amount":"Por favor ingrese la cantidad",
			"data-no-click-enter-cvv":"Por favor ingrese cvv",
			"data-success-header":"Éxito",
			"data-topup-successful":"Recarga exitosa",
			"spn-nav-link-bank":"Banco",
			
			}
		},
	}
  }, function(err, t) {
	   updateContent();
  });
  
  function updateContent() {
        /* Menus */
        $('#idnavmenu_Dashboard').text(i18next.t('idnavmenu_Dashboard')); 
        $('#idnavmenu_ManageFiatWallet').text(i18next.t('idnavmenu_ManageFiatWallet')); 
        $('#idnavmenu_DigitalAssets').text(i18next.t('idnavmenu_DigitalAssets')); 
        $('#idnavmenu_CurrencyRemittance').text(i18next.t('idnavmenu_CurrencyRemittance')); 
        $('#idnavmenu_ManageCards').text(i18next.t('idnavmenu_ManageCards')); 
        $('#idnavmenu_Loyalty').text(i18next.t('idnavmenu_Loyalty')); 
        $('#idnavmenu_UpdatePlan').text(i18next.t('idnavmenu_UpdatePlan')); 
        $('#idnavmenu_Logout').text(i18next.t('idnavmenu_Logout')); 
        $('#idnavmenu_BuyNewPlan').text(i18next.t('idnavmenu_BuyNewPlan')); 
        $('#header_buy_porte_token').text(i18next.t('header_buy_porte_token')); 
        $('#btn_buy_coin').text(i18next.t('btn_buy_coin')); 
        $('#idnavmenu_Profile').text(i18next.t('idnavmenu_Profile')); 
        $('#idnavmenu_Disputes').text(i18next.t('idnavmenu_Disputes')); 
        /* Sub Menus */
        $('#idnavsubmenu_Dashboard').text(i18next.t('idnavsubmenu_Dashboard')); 
        $('#idnavsubmenu_ViewandEdit').text(i18next.t('idnavsubmenu_ViewandEdit')); 
        $('#idnavsubmenu_ViewWallet').text(i18next.t('idnavsubmenu_ViewWallet')); 
        $('#idnavsubmenu_TopupWallet').text(i18next.t('idnavsubmenu_TopupWallet')); 
        $('#idnavsubmenu_SendMoney').text(i18next.t('idnavsubmenu_SendMoney')); 
        $('#idnavsubmenu_CashTransactions').text(i18next.t('idnavsubmenu_CashTransactions')); 
        $('#idnavsubmenu_SetupWallet').text(i18next.t('idnavsubmenu_SetupWallet')); 
        $('#idnavsubmenu_Bitcoin').text(i18next.t('idnavsubmenu_Bitcoin')); 
        $('#idnavsubmenu_Assets').text(i18next.t('idnavsubmenu_Assets')); 
        $('#idnavsubmenu_BuyAsset').text(i18next.t('idnavsubmenu_BuyAsset')); 
        $('#idnavsubmenu_TransferCoin').text(i18next.t('idnavsubmenu_TransferCoin')); 
        $('#idnavsubmenu_Swap').text(i18next.t('idnavsubmenu_Swap')); 
        $('#idnavsubmenu_SellAssettoFiat').text(i18next.t('idnavsubmenu_SellAssettoFiat')); 
        $('#idnavsubmenu_DisplayTransactions').text(i18next.t('idnavsubmenu_DisplayTransactions')); 
        $('#idnavsubmenu_DigitalRemittance').text(i18next.t('idnavsubmenu_DigitalRemittance')); 
        $('#idnavsubmenu_FiatRemittance').text(i18next.t('idnavsubmenu_FiatRemittance')); 
        $('#idnavsubmenu_ShowCards').text(i18next.t('idnavsubmenu_ShowCards')); 
        $('#idnavsubmenu_RedeemPoints').text(i18next.t('idnavsubmenu_RedeemPoints')); 
        $('#idnavsubmenu_ViewDispute').text(i18next.t('idnavsubmenu_ViewDispute')); 
        $('#idnavsubmenu_RaiseDisputes').text(i18next.t('idnavsubmenu_RaiseDisputes')); 
        $('#idnavsubmenu_ChangeYourPlan').text(i18next.t('idnavsubmenu_ChangeYourPlan')); 
        $('#idnavsubmenu_BuyNewPlan').text(i18next.t('idnavsubmenu_BuyNewPlan')); 
        /* Quick links */
        $('#idnav_UserSettings').text(i18next.t('idnav_UserSettings'));        
        $('#idnav_UpdateProfile').text(i18next.t('idnav_UpdateProfile'));        
        $('#idnav_Logout').text(i18next.t('idnav_Logout'));        
        /* Specific Page Content */
       // $('#greeting').text(i18next.t('greeting'));
        $('#breadcrumb-item-manage-wallets').text(i18next.t('breadcrumb-item-manage-wallets'));
        $('#breadcrumb-item-topup-wallet').text(i18next.t('breadcrumb-item-topup-wallet'));
        $('#topupwallet_label').text(i18next.t('topupwallet_label'));
        $('#spn-nav-link-cards').text(i18next.t('spn-nav-link-cards'));
        $('#spn-select-card').text(i18next.t('spn-select-card'));
        $('#amount-label').text(i18next.t('amount-label'));
        $('#cvv-label').text(i18next.t('cvv-label'));
        $('#dont-store-cvv-label').text(i18next.t('dont-store-cvv-label'));
        $('#btn-topup-label').text(i18next.t('btn-topup-label'));
        $('#spn-coming-soon').text(i18next.t('spn-coming-soon'));

		$('#data-validation-error-swal-header').text(i18next.t('data-validation-error-swal-header'));
		$('#data-validation-error-failed-to-get-details').text(i18next.t('data-validation-error-failed-to-get-details'));
		$('#data-validation-problem-with-connection').text(i18next.t('data-validation-problem-with-connection'));
		$('#data-validation-check-your-data').text(i18next.t('data-validation-check-your-data'));
		$('#data-no-cards-present-data').text(i18next.t('data-no-cards-present-data'));
		$('#data-validation-select-card').text(i18next.t('data-validation-select-card'));
		$('#data-no-click-here-to-register').text(i18next.t('data-no-click-here-to-register'));
		$('#data-no-click-enter-amount').text(i18next.t('data-no-click-enter-amount'));
		$('#data-no-click-enter-cvv').text(i18next.t('data-no-click-enter-cvv'));
		$('#data-success-header').text(i18next.t('data-success-header'));
		$('#data-topup-successful').text(i18next.t('data-topup-successful'));        
		$('#spn-nav-link-bank').text(i18next.t('spn-nav-link-bank'));        
  }
	  function fnChangePageLanguage(lng){
		console.log('lng ',lng);
		  i18next.changeLanguage(lng, fnChangeLanguage(lng))
		  $('#hdnlangpref').val(lng);
	  }
	  i18next.on('languageChanged', function(lng) {
		updateContent(lng);
	  });
	  function fnChangeLanguage(lang){
		  if(lang=='EN')  $('#lang_def').text('EN') 
			else if(lang=='ES')  $('#lang_def').text('ES')
	  }

$(window).on("load", function(e) {
    $("#global-loader").fadeOut("slow");
})
function fnGetCardDetails(relno){
	$('#get-card-form input[name="qs"]').val('card');
	$('#get-card-form input[name="rules"]').val('gettokenizedcards');
	$('#get-card-form input[name="relno"]').val(relno);
	var form = $('#get-card-form')[0];
    var formData = new FormData(form);	
	$.ajaxSetup({
		beforeSend: function(xhr) {
			xhr.setRequestHeader('x-api-key' , getAPIKey());
		}
	});
	$.ajax({
		url: 'ms',
		data: formData,
		processData: false,
		contentType: false,
		type: 'POST',
		success: function (result) {
			if (result) {
				var data = JSON.parse(result);
					var htmlData='';
	              $('#showdetails').html('');
				  console.log("Error is"+ data.error);
				if(data.error ==="false"){
						var cardDetails=data.data;
						console.table(cardDetails)
						var count = cardDetails.length;
						console.log("count is "+count);
						
					 for (i=0; i<count;i++){
						
						if(cardDetails[i].maskedCardNumber.startsWith("5")){
							htmlData+= `
								<label class="custom-control custom-radio">
										<input type="radio" class="custom-control-input" name="tokenid" id="tokenid" value="`+cardDetails[i].tokenId+`" >
										<span class="custom-control-label"><img src="assets/images/cards/mastercard.png" alt="MasterCard" height="24" width="38">`+cardDetails[i].maskedCardNumber+`</span>
								  </label>
						    `;											
							}else if (cardDetails[i].maskedCardNumber.startsWith("4")){
								htmlData+= `
								<label class="custom-control custom-radio">
										<input type="radio" class="custom-control-input" name="tokenid" id="tokenid" value="`+cardDetails[i].tokenId+`"  >
										<span class="custom-control-label"><img src="assets/images/cards/visa.png" alt="Visa" height="24" width="38">`+cardDetails[i].maskedCardNumber+`</span>
								  </label>
						    `;	
							}else if (cardDetails[i].maskedCardNumber.startsWith("3")){
								htmlData+= `
								<label class="custom-control custom-radio">
										<input type="radio" class="custom-control-input" name="tokenid" id="tokenid" value="`+cardDetails[i].tokenId+`"  >
										<span class="custom-control-label"><img src="assets/images/cards/amex.png" alt="Amex" height="24" width="38">`+cardDetails[i].maskedCardNumber+`</span>
								  </label>
						    `;	
							}else{
								htmlData+= `
								<label class="custom-control custom-radio">
										<input type="radio" class="custom-control-input" name="tokenid" id="tokenid" value="`+cardDetails[i].tokenId+`"  >
										<span class="custom-control-label">`+cardDetails[i].maskedCardNumber+`</span>
								  </label>
						    `;	
							}
							
							}
						
						$('#cardavailable').removeClass('hidden');	
						$('#showdetails').html(htmlData);
			

				}else if(data.error === "nodata"){
                    htmlData = `
								<p><span style="color:grey">`+ $('#data-no-cards-present-data').text()+` </span><span style="color:#1753fc"><a href=""onclick="javascript:fnRegisterCards();return false;">`+ $('#data-no-click-here-to-register').text()+`</a></span></p>  
						    `;
					$('#cardavailable').addClass('hidden');	
					$('#showdetails').html(htmlData);
                }
			}
		},
		error: function() {
            Swal.fire({
                icon: 'error',
                title: $('#data-validation-error-swal-header').text(),
                text: $('#data-validation-problem-with-connection').text(),
                showConfirmButton: true,
                confirmButtonText: "Ok",
                }).then(function() {
                    $('#get-card-form').attr('action', 'ws');
                    $('input[name="qs"]').val('lgt');
                    $('input[name="rules"]').val('lgtdefault');
                    $("#get-card-form").submit();	
        });
		}
	}); 
}
function fnRegisterCards(){
		    $('#get-card-form').attr('action', 'ws');
		    $('input[name="qs"]').val('card');
		    $('input[name="rules"]').val('Register Card');
			$("#get-card-form").submit();
	  }

function fnTopUpWalletByCard(){
	
	$( "#card-topup-form" ).validate( {
		rules: {
			tokenid: {
				required: true
			},
			amount: {
				required: true,				
			},
			cvv: {
				required: true,				
			}
	    },
       messages: {
			tokenid: {
				required: $('#data-validation-select-card').text()
			},
			amount: {
				required: $('#data-no-click-enter-amount').text()
			},
			cvv: {
				required: $('#data-no-click-enter-cvv').text()
			}
		 },
		errorElement: "em",
		errorPlacement: function ( error, element ) {
			// Add the `invalid-feedback` class to the error element
			error.addClass( "invalid-feedback" );
			if ( element.prop( "type" ) === "checkbox" ) {
				error.insertAfter( element.next( "label" ) );
			} else {
				error.insertAfter( element );
			}
		},
		highlight: function ( element, errorClass, validClass ) {
			$( element ).addClass( "is-invalid" ).removeClass( "is-valid" );
		},
		unhighlight: function (element, errorClass, validClass) {
			$( element ).addClass( "is-valid" ).removeClass( "is-invalid" );
		}

	 });

					 if($( "#card-topup-form" ).valid()){
					
						$('#card-topup-form input[name="qs"]').val('card');
						$('#card-topup-form input[name="rules"]').val('topupbycard');
						$('#card-topup-form input[name="relno"]').val(relno);
						var form = $('#card-topup-form')[0];
					    var formData = new FormData(form);	
						formData.append("hdnlang", $('#lang_def').text());
						$.ajaxSetup({
							beforeSend: function(xhr) {
								xhr.setRequestHeader('x-api-key' , getAPIKey());
							}
						});
						$.ajax({
							url: 'ms',
							data: formData,
							processData: false,
							contentType: false,
							type: 'POST',
							success: function (result) {
								if (result) {
									var data = JSON.parse(result);
					
									if(data.error==="false"){
										Swal.fire({
											icon: 'success',
											title: $('#data-success-header').text(),
											text: $('#data-topup-successful').text(),
											showConfirmButton: true,
											confirmButtonText: "Ok",
											closeOnConfirm: true,
										}).then(function() {
											 // Call login page
											   $('#card-topup-form').attr('action', 'ws');
											   $('input[name="qs"]').val('wal');
											   $('input[name="rules"]').val('View Wallet');
											   $("#card-topup-form").submit();
										});	
									}else{
					                        Swal.fire({
					                            icon: 'error',
					                            title: $('#data-validation-error-swal-header').text(),
					                            text: data.message,
					                            showConfirmButton: true,
					                            confirmButtonText: "Ok",
					                            closeOnConfirm: true,
					                            }).then(function() {
					                    });
					                }
								}
									
								
							},
							error: function() {
					            Swal.fire({
					                icon: 'error',
					                title: $('#data-validation-error-swal-header').text(),
					                text: $('#data-validation-problem-with-connection').text(),
					                showConfirmButton: true,
					                confirmButtonText: "Ok",
					                }).then(function() {
					                    $('#card-topup-form').attr('action', 'ws');
					                    $('input[name="qs"]').val('lgt');
					                    $('input[name="rules"]').val('lgtdefault');
					                    $("#card-topup-form").submit();	
					        });
							}
						}); 
						
						}else{
										  Swal.fire({
											  icon: 'error',
											  title:  $('#data-validation-error-swal-header').text(),
											  text:  $('#data-validation-check-your-data').text()
											  //footer: '<a href>Why do I have this issue?</a>'
										  })
										  return false;
									  }
}